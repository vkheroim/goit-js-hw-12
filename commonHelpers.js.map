{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getPhotos(inputValue, currentPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const params = {\n    key: '43217946-108b18fb86fe71a4135c25a24',\n    q: inputValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n  const url = `${BASE_URL}${END_POINT}`;\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","export function photosTemplate(photos) {\n  return photos\n    .map(\n      photo => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${photo.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" />\n      </a>\n      <ul class=\"img-description\">\n        <li>\n          <h3>Likes</h3>\n          <p>${photo.likes}</p>\n        </li>\n        <li>\n          <h3>Views</h3>\n          <p>${photo.views}</p>\n        </li>\n        <li>\n          <h3>Comments</h3>\n          <p>${photo.comments}</p>\n        </li>\n        <li>\n          <h3>Downloads</h3>\n          <p>${photo.downloads}</p>\n        </li>\n      </ul>\n    </li>`\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { photosTemplate } from './js/render-functions';\n\n//===============================змінні=================================\nconst searchForm = document.querySelector('.form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.btn');\nconst loader = document.querySelector('.loader');\n\nlet searchValue; // Змінна для зберігання значення введеного користувачем\nlet currentPage = 1; // Поточна сторінка результатів пошуку\nlet maxPages = 0; // Максимальна кількість сторінок результатів\nconst resultsPerPage = 15; // Кількість елементів на сторінці\n\n// Створюємо об'єкт SimpleLightbox для галереї зображень\nlet lightboxGallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// Подія, яка спрацьовує перед показом зображення в галереї\nlightboxGallery.on('show.simplelightbox', function () {});\n\n// Функція для перевірки статусу кнопки \"Завантажити ще\"\nfunction checkLoadMoreButtonStatus() {\n  if (currentPage >= maxPages) {\n    hideLoadMoreButton(); // Ховаємо кнопку \"Завантажити ще\"\n    iziToast.warning({\n      // Повідомлення користувачеві про досягнення кінця результатів\n      message: 'Вибачте, але ви дійшли до кінця результатів пошуку.',\n      color: 'blue',\n      position: 'topRight',\n    });\n  } else {\n    showLoadMoreButton();\n  }\n}\n\n// Функція для прокрутки сторінки\nfunction scrollToTop() {\n  const firstImageHeight =\n    galleryContainer.firstChild.getBoundingClientRect().height; // Отримуємо висоту першого елемента в галереї\n  console.log(firstImageHeight);\n  scrollBy({\n    top: firstImageHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n// Функція для показу кнопки \"Завантажити ще\"\nfunction showLoadMoreButton() {\n  return loadMoreButton.classList.remove('is-hidden');\n}\n\n// Функція для приховання кнопки \"Завантажити ще\"\nfunction hideLoadMoreButton() {\n  return loadMoreButton.classList.add('is-hidden');\n}\n\n// Функція для показу loader\nfunction showLoader() {\n  return loader.classList.remove('is-hidden'); // Видаляємо клас, який приховує прелоадер\n}\n\n// Функція для приховування loader\nfunction hideLoader() {\n  return loader.classList.add('is-hidden');\n}\n\n// default settings\nhideLoader();\nhideLoadMoreButton();\n\n// Подія відправлення форми\nsearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  searchValue = e.target.elements.search.value.trim(); // Отримуємо значення, введене користувачем в поле пошуку\n  if (searchValue === '') {\n    return iziToast.warning({\n      message: 'Будь ласка, заповніть поле!',\n      color: 'red',\n      position: 'topRight',\n    });\n  }\n  galleryContainer.innerHTML = '';\n  currentPage = 1;\n  showLoader();\n  try {\n    const photosData = await getPhotos(searchValue, currentPage); // Отримання фотографій за введеним запитом\n    maxPages = Math.ceil(photosData.totalHits / resultsPerPage); // Обчислення максимальної кількості сторінок результатів\n    const photosMarkup = photosTemplate(photosData.hits); // Генерація розмітки для отриманих фотографій\n    if (photosData.hits.length === 0) {\n      iziToast.error({\n        message:\n          'На жаль, за вашим запитом не знайдено зображень. Будь ласка, спробуйте ще раз!',\n        position: 'topRight',\n        color: 'red',\n      });\n    } else {\n      galleryContainer.insertAdjacentHTML('beforeend', photosMarkup); // Додавання розмітки фотографій до контейнера галереї\n      lightboxGallery.refresh(); // Оновлення галереї зображень\n      checkLoadMoreButtonStatus();\n    }\n  } catch (error) {\n    iziToast.error({\n      message:\n        'На жаль, за вашим запитом не знайдено зображень. Будь ласка, спробуйте ще раз!',\n      position: 'topRight',\n      color: 'red',\n    });\n  } finally {\n    hideLoader();\n    searchForm.reset();\n  }\n});\n\n// Подія кліку на кнопку \"Завантажити ще\"\nloadMoreButton.addEventListener('click', async e => {\n  showLoader();\n  currentPage += 1;\n  const photosData = await getPhotos(searchValue, currentPage); // Отримання фотографій для наступної сторінки\n  const photosMarkup = photosTemplate(photosData.hits); // Генерація розмітки для отриманих фотографій\n  galleryContainer.insertAdjacentHTML('beforeend', photosMarkup); // Додавання розмітки фотографій до контейнера галереї\n  scrollToTop();\n  lightboxGallery.refresh();\n  hideLoader();\n  checkLoadMoreButtonStatus();\n});\n"],"names":["getPhotos","inputValue","currentPage","BASE_URL","END_POINT","params","url","axios","photosTemplate","photos","photo","searchForm","galleryContainer","loadMoreButton","loader","searchValue","maxPages","resultsPerPage","lightboxGallery","SimpleLightbox","checkLoadMoreButtonStatus","hideLoadMoreButton","iziToast","showLoadMoreButton","scrollToTop","firstImageHeight","showLoader","hideLoader","e","photosData","photosMarkup"],"mappings":"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"}